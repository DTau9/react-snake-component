(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1070:function(module,exports,__webpack_require__){"use strict";__webpack_require__(8),__webpack_require__(3),__webpack_require__(50),__webpack_require__(1071),__webpack_require__(41),__webpack_require__(42),__webpack_require__(1072),__webpack_require__(31),__webpack_require__(38);var _clientApi=__webpack_require__(54),_clientLogger=__webpack_require__(35),_configFilename=__webpack_require__(1073);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),_configFilename.loaders&&_configFilename.loaders.forEach((function(loader){return(0,_clientApi.addLoader)(loader,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},1073:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parameters",(function(){return parameters}));var parameters={actions:{argTypesRegex:"^on[A-Z].*"}}},1074:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(359).configure)([__webpack_require__(1075),__webpack_require__(1076)],module,!1)}).call(this,__webpack_require__(103)(module))},1075:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=1075},1076:function(module,exports,__webpack_require__){var map={"./demo/demo.stories.jsx":1086};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1076},1077:function(module,exports,__webpack_require__){var api=__webpack_require__(1078),content=__webpack_require__(1079);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1079:function(module,exports,__webpack_require__){(exports=__webpack_require__(1080)(!1)).push([module.i,'.game-snake {\n  text-align: center;\n}\n\n.game-field {\n  border: 10px solid #663355;\n  margin: 0 auto;\n  position: relative;\n  overflow: hidden;\n}\n\n.game-over-field {\n  -webkit-animation: gameover;\n          animation: gameover;\n  -webkit-animation-duration: 0.7s;\n          animation-duration: 0.7s;\n  font-size: 30px;\n  height: 60%;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  width: 60%;\n}\n\n@-webkit-keyframes gameover {\n  from {\n    height: 0%;\n    font-size: 0px;\n    width: 0%;\n  }\n  to {\n    height: 60%;\n    font-size: 30px;\n    width: 60%;\n  }\n}\n\n@keyframes gameover {\n  from {\n    height: 0%;\n    font-size: 0px;\n    width: 0%;\n  }\n  to {\n    height: 60%;\n    font-size: 30px;\n    width: 60%;\n  }\n}\n\n.win {\n  background-color: #60bb43;\n  box-shadow: 0 0 60px 66px #9202ff, inset 0 0 30px currentColor;\n  color: white\n}\n\n.lose {\n  background-color: #dad6d6;\n  box-shadow: 0 0 60px 66px #9202ff, inset 0 0 30px currentColor;\n  color: #dc1d1d;\n}\n\n.game-over-field::before {\n  align-items: center;\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  text-shadow: 0 0 10px currentColor;\n  position: absolute;\n  width: 100%;\n}\n\n.game-over-field.win::before {\n  content: "You Win";\n}\n\n.game-over-field.lose::before {\n  content: "You Lose";\n}\n\n.game-score {\n  position: absolute;\n  font-size: 17px;\n  z-index: 1;\n}\n\n.key-control {\n  min-width: 100%;\n  width: 0;\n}\n',""]),module.exports=exports},1086:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DemoStory",(function(){return DemoStory}));__webpack_require__(252),__webpack_require__(4);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),jsx_runtime=(__webpack_require__(285),__webpack_require__(20),__webpack_require__(150),__webpack_require__(121),__webpack_require__(151),__webpack_require__(149),__webpack_require__(38),__webpack_require__(10),__webpack_require__(12),__webpack_require__(5),__webpack_require__(25),__webpack_require__(14),__webpack_require__(3),__webpack_require__(9),__webpack_require__(21),__webpack_require__(13),__webpack_require__(16),__webpack_require__(15),__webpack_require__(1077),__webpack_require__(43));function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var src_Snake=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Snake,_React$Component);var _super=_createSuper(Snake);function Snake(props){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Snake),(_this=_super.call(this,props)).setDirection=function(keyCode){var direction=_this.state.direction,nextDirection={ArrowRight:"right",ArrowLeft:"left",ArrowDown:"down",ArrowUp:"up"};"left"===direction&&"right"===nextDirection[keyCode]||"right"===direction&&"left"===nextDirection[keyCode]||"up"===direction&&"down"===nextDirection[keyCode]||"down"===direction&&"up"===nextDirection[keyCode]||nextDirection[keyCode]&&_this.setState({nextDirection:nextDirection[keyCode]})},_this.gameLoop=function(){_this.setState({timeoutId:setTimeout(_this.gameLoop,_this.state.timeoutDelay)}),_this.setState({direction:_this.state.nextDirection}),_this.updateGame(),_this.createFood()},_this.startGame=function(){0===_this.state.timeoutId&&_this.gameLoop()},_this.pauseGame=function(){clearTimeout(_this.state.timeoutId),_this.setState({timeoutId:0})},_this.resetGame=function(){clearTimeout(_this.state.timeoutId),_this.setState({gameEnd:!1,timeoutId:0,direction:"right",nextDirection:"right",score:0,timeoutDelay:300,snakeSegmentsPositions:[{left:8*_this.segmentSize,top:2*_this.segmentSize}],snakeHeadPosition:{left:8*_this.segmentSize,top:2*_this.segmentSize},food:{left:10*_this.segmentSize,top:5*_this.segmentSize}})},_this.gameControlHandler=function(e){e.preventDefault(),"Space"===e.code&&_this.pauseGame(),"Enter"===e.code&&_this.startGame(),"Backspace"===e.code&&_this.resetGame(),_this.setDirection(e.code)};var _this$props=_this.props,widthField=_this$props.widthField,heightField=_this$props.heightField,segmentSize=_this$props.segmentSize;return _this.widthField=widthField,_this.heightField=heightField,_this.segmentSize=segmentSize,_this.state={gameEnd:!1,timeoutId:0,direction:"right",nextDirection:"right",score:0,timeoutDelay:300,snakeSegmentsPositions:[{left:8*_this.segmentSize,top:2*_this.segmentSize}],snakeHeadPosition:{left:8*_this.segmentSize,top:2*_this.segmentSize},food:{left:10*_this.segmentSize,top:5*_this.segmentSize}},_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Snake,[{key:"createSegment",value:function createSegment(left,top){var color=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#008743",isFood=arguments.length>3&&void 0!==arguments[3]&&arguments[3],index=arguments.length>4?arguments[4]:void 0,circle=isFood?"50%":"none";return Object(jsx_runtime.jsx)("div",{style:{left:left,top:top,backgroundColor:color,height:this.segmentSize,position:"absolute",width:this.segmentSize,borderRadius:circle}},index)}},{key:"createFood",value:function createFood(){var _this$state$food=this.state.food,top=_this$state$food.top,left=_this$state$food.left;return this.createSegment(left,top,"#005042",!0)}},{key:"changeFoodPosition",value:function changeFoodPosition(){return{top:Math.floor(Math.random()*(this.heightField/this.segmentSize))*this.segmentSize,left:Math.floor(Math.random()*(this.widthField/this.segmentSize))*this.segmentSize}}},{key:"isEqualPosition",value:function isEqualPosition(obj1,obj2){return obj1.top===obj2.top&&obj1.left===obj2.left}},{key:"isCollision",value:function isCollision(newHead){var _step,gorizontCollision=newHead.left<0||newHead.left>this.widthField-this.segmentSize,verticalCollision=newHead.top<0||newHead.top>this.heightField-this.segmentSize,selfCollision=!1,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(this.state.snakeSegmentsPositions);try{for(_iterator.s();!(_step=_iterator.n()).done;){var seg=_step.value;this.isEqualPosition(seg,newHead)&&(selfCollision=!0)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return this.props.collisionWithWalls&&(gorizontCollision||verticalCollision)||selfCollision}},{key:"updateGame",value:function updateGame(){var newHead,_this$state=this.state,food=_this$state.food,_this$state$snakeHead=_this$state.snakeHeadPosition,left=_this$state$snakeHead.left,top=_this$state$snakeHead.top,dir=_this$state.direction,snakeSegmentsPositions=_toConsumableArray(this.state.snakeSegmentsPositions),newScore=this.state.score,newFoodPosition=this.state.food,timeoutDelay=this.state.timeoutDelay;if("up"===dir&&(newHead={left:left,top:top-this.segmentSize}),"right"===dir&&(newHead={left:left+this.segmentSize,top:top}),"down"===dir&&(newHead={left:left,top:top+this.segmentSize}),"left"===dir&&(newHead={left:left-this.segmentSize,top:top}),this.props.collisionWithWalls||(newHead.left>this.widthField-this.segmentSize&&(newHead.left=0),newHead.left<0&&(newHead.left=this.widthField-this.segmentSize),newHead.top>this.heightField-this.segmentSize&&(newHead.top=0),newHead.top<0&&(newHead.top=this.heightField-this.segmentSize)),snakeSegmentsPositions.unshift(newHead),this.isEqualPosition(food,newHead)){++newScore,this.changeSpeed&&(timeoutDelay-=10);do{newFoodPosition=this.changeFoodPosition()}while(this.isCollision(newFoodPosition))}else snakeSegmentsPositions.pop();(this.isCollision(newHead)||newScore===this.props.scoreForWin)&&this.gameOver(),this.setState({score:newScore,timeoutDelay:timeoutDelay,snakeSegmentsPositions:snakeSegmentsPositions,snakeHeadPosition:newHead,food:newFoodPosition})}},{key:"createSnake",value:function createSnake(snakeSegments){var _this2=this;return snakeSegments.map((function(seg,index){return 0===index?_this2.createSegment(seg.left,seg.top,"#5E3D19",!1,index):index%2&&0!==index?_this2.createSegment(seg.left,seg.top,"#007090",!1,index):_this2.createSegment(seg.left,seg.top,"#6B651E",!1,index)}))}},{key:"gameOver",value:function gameOver(){clearTimeout(this.state.timeoutId),this.setState({gameEnd:!0})}},{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("keydown",this.gameControlHandler)}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearInterval(this.intervalId),document.removeEventListener("keydown",this.gameControlHandler)}},{key:"render",value:function render(){var _this$state2=this.state,snakeSegmentsPositions=_this$state2.snakeSegmentsPositions,gameEnd=_this$state2.gameEnd,score=_this$state2.score,snake=this.createSnake(snakeSegmentsPositions),viewSnake=gameEnd?null:snake,viewFood=gameEnd?null:this.createFood(),bgColorGameOver=score===this.props.scoreForWin?"win":"lose",end=gameEnd?Object(jsx_runtime.jsx)("div",{className:"game-over-field ".concat(bgColorGameOver)}):null;return Object(jsx_runtime.jsxs)("div",{className:"game-snake",children:[Object(jsx_runtime.jsxs)("div",{className:"game-field",style:{width:this.widthField,height:this.heightField},children:[Object(jsx_runtime.jsxs)("div",{className:"game-score",children:["Score: ",score]}),viewSnake,viewFood,end]}),Object(jsx_runtime.jsxs)("div",{className:"key-control",children:[Object(jsx_runtime.jsx)("p",{children:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"⇦ ⇧ ⇩ ⇨"})}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("code",{children:"Enter"})," ‒ start"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("code",{children:"Space"})," ‒ pause"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("code",{children:"Backspace"})," ‒ reset"]})]})]})}}]),Snake}(react_default.a.Component);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}src_Snake.defaultProps={collisionWithWalls:!0,changeSpeed:!0,widthField:340,heightField:340,segmentSize:20,scoreForWin:20},src_Snake.__docgenInfo={description:"",methods:[{name:"createSegment",docblock:null,modifiers:[],params:[{name:"left",type:null},{name:"top",type:null},{name:"color",type:null},{name:"isFood",type:null},{name:"index",type:null}],returns:null},{name:"createFood",docblock:null,modifiers:[],params:[],returns:null},{name:"setDirection",docblock:null,modifiers:[],params:[{name:"keyCode",type:null}],returns:null},{name:"changeFoodPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"isEqualPosition",docblock:null,modifiers:[],params:[{name:"obj1",type:null},{name:"obj2",type:null}],returns:null},{name:"isCollision",docblock:null,modifiers:[],params:[{name:"newHead",type:null}],returns:null},{name:"updateGame",docblock:null,modifiers:[],params:[],returns:null},{name:"createSnake",docblock:null,modifiers:[],params:[{name:"snakeSegments",type:null}],returns:null},{name:"gameOver",docblock:null,modifiers:[],params:[],returns:null},{name:"gameLoop",docblock:null,modifiers:[],params:[],returns:null},{name:"startGame",docblock:null,modifiers:[],params:[],returns:null},{name:"pauseGame",docblock:null,modifiers:[],params:[],returns:null},{name:"resetGame",docblock:null,modifiers:[],params:[],returns:null},{name:"gameControlHandler",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"Snake",props:{collisionWithWalls:{defaultValue:{value:"true",computed:!1},required:!1},changeSpeed:{defaultValue:{value:"true",computed:!1},required:!1},widthField:{defaultValue:{value:"340",computed:!1},required:!1},heightField:{defaultValue:{value:"340",computed:!1},required:!1},segmentSize:{defaultValue:{value:"20",computed:!1},required:!1},scoreForWin:{defaultValue:{value:"20",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\index.jsx"]={name:"Snake",docgenInfo:src_Snake.__docgenInfo,path:"src\\index.jsx"});var Demo_Demo=function Demo(args){var props=_extends({},args);return Object(jsx_runtime.jsx)(src_Snake,Object.assign({},props))};Demo_Demo.displayName="Demo",Demo_Demo.__docgenInfo={description:"",methods:[],displayName:"Demo"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples\\demo\\Demo.jsx"]={name:"Demo",docgenInfo:Demo_Demo.__docgenInfo,path:"examples\\demo\\Demo.jsx"});var DemoStory=Demo_Demo.bind({});DemoStory.storyName="Demo",DemoStory.args={collisionWithWalls:!1,changeSpeed:!0,scoreForWin:20};__webpack_exports__.default={title:"Demo",component:DemoStory,argTypes:{collisionWithWalls:{control:{type:"boolean"}},changeSpeed:{control:{type:"boolean"}},scoreForWin:{control:{type:"range",max:100,min:1,step:1}}}};DemoStory.parameters=Object.assign({storySource:{source:"Demo.bind({})"}},DemoStory.parameters)},476:function(module,exports,__webpack_require__){__webpack_require__(477),__webpack_require__(632),__webpack_require__(633),__webpack_require__(791),__webpack_require__(1011),__webpack_require__(1044),__webpack_require__(1049),__webpack_require__(1061),__webpack_require__(1063),__webpack_require__(1068),__webpack_require__(1070),module.exports=__webpack_require__(1074)},544:function(module,exports){},633:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(359)}},[[476,1,2]]]);
//# sourceMappingURL=main.4493e6fb7a924b5ed135.bundle.js.map